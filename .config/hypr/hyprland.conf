# ┌─┐┌─┐┌┐┌┬ ┬┌─┐┬─┐┬┌─┌─┐
# ┌─┘├┤ │││││││ │├┬┘├┴┐└─┐
# └─┘└─┘┘└┘└┴┘└─┘┴└─┴ ┴└─┘
# https://github.com/kbuckleys/

displaysettings {
    $MONITOR = HDMI-A-1
    $RES = 1920x1080
    $RR = 100
    $POS = 0x0
    $SF= 1
}

defaults {
    $MENU = rofi -show
    $TERM = footclient
    $WEB = firefox
    $SYSMON = btop
    $EDITOR = nvim
    $FMAN = $TERM -e yazi
}

rules {
    env = GDK_BACKEND,wayland,x11,*
    env = QT_QPA_PLATFORM,wayland;xcb
    env = QT_STYLE_OVERRIDE,kvantum
    env = SDL_VIDEODRIVER,wayland
    env = MOZ_ENABLE_WAYLAND,1
    env = ELECTRON_OZONE_PLATFORM_HINT,wayland
    env = OZONE_PLATFORM,wayland
    env = EDITOR, $EDITOR
}

xwayland {
    force_zero_scaling = false
}

cursor {
    env = HYPRCURSOR_THEME,MacTahoe-cursors
    env = HYPRCURSOR_SIZE,24
    env = XCURSOR_THEME,MacTahoe-cursors
    env = XCURSOR_SIZE,24

    hotspot_padding = 1
    inactive_timeout = 10
    persistent_warps = true
    warp_on_change_workspace = 1
    enable_hyprcursor = true
}

monitors {
    monitor = ,preferred,auto,auto
    monitor = $MONITOR,$RES@$RR,$POS,$SF
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    middle_click_paste = false
    font_family = 0xProto Nerd Font
    background_color = 0x000000FF
}

ecosystem {
    no_update_news = false
    no_donation_nag = true
}

startup {
    exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
    exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
    exec-once = /usr/lib/hyprpolkitagent/hyprpolkitagent
    exec-once = wl-paste --type image --watch cliphist store
    exec-once = wl-paste --type text --watch cliphist store
    exec-once = wl-clip-persist --clipboard regular
    exec-once = sleep 1 && killall nm-applet
    exec-once = foot --server
    exec-once = swww-daemon
    exec-once = waybar
    exec-once = mako
}

input {
    kb_layout = us
    repeat_rate = 25
    repeat_delay = 300
    follow_mouse = 1
    sensitivity = -0.6
    scroll_factor = 1
    accel_profile = flat
    resolve_binds_by_sym = 1
}

general {
    layout = dwindle
    no_border_on_floating = false
    no_focus_fallback = true
    border_size = 1
    gaps_in = -1
    gaps_out = -1, -1, -1, -1
    col.active_border = rgba(155,191,191,0.2)
    col.inactive_border = rgba(155,191,191,0.2)
}

decoration {
    rounding = 0
    dim_inactive = false
    active_opacity = 1
    inactive_opacity = 0.9
    dim_special = 0.7
    dim_modal = true
    dim_strength = 0.2
    dim_around = 0.5
    blur { 
        enabled = true
        popups = false
        new_optimizations = true
        ignore_opacity = true
        size = 3
        passes = 6
        vibrancy = 0.1696
    }
    shadow {
        enabled = false
        sharp = false
        range = 20
        render_power = 2
        color = rgba(155,191,191,0.20)
        color_inactive = rgba(0,0,0,0)
    }
}

group {
    col.border_active = rgba(00000000)
    col.border_inactive = rgba(00000000)
    col.border_locked_active = rgba(00000000)
    col.border_locked_inactive = rgba(00000000)

    insert_after_current = true
    focus_removed_window = true
    drag_into_group = true
    auto_group = true

    groupbar {
        enabled = true
        font_family = 0xProto Nerd Font
        font_weight_active = Bold
        font_weight_inactive = Normal
        font_size = 12
        gradients = true
        height = 23
        stacked = false
        render_titles = true
        indicator_gap = -2
        indicator_height = 0
        text_offset = 0
        scrolling = true
        rounding = 0
        gaps_in = 0
        gaps_out = 0

        text_color = rgba(0b0e0eff)
        text_color_inactive = rgba(dfdfddff)
        col.active = rgba(9bbfbfff)
        col.inactive = rgba(20242aff)
        col.locked_active = rgba(e0d8a4ff)
        col.locked_inactive = rgba(20242aff)
    }
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    special_scale_factor = 0.960
}

render {
    direct_scanout = 2

}

animations {
    enabled = true
    workspace_wraparound = false

    bezier = easeOutQuint, 0.3, 1, 0.3, 1
    bezier = almostLinear, 0.5, 0.5, 0.75, 1.0
    bezier = linear, 0, 0, 1, 1
    bezier = quick, 0.15, 0, 0.1, 1

    animation = workspaces, 1, 1.5, quick
    animation = specialWorkspace, 1, 1, linear, slidevert
    animation = windowsIn, 1, 1.5, easeOutQuint, popin 80%
    animation = windowsOut, 1, 2, easeOutQuint, popin 80%
    animation = windowsMove, 1, 1.5, easeOutQuint, slide
    animation = fadeSwitch, 1, 2, quick
    animation = layersIn, 1, 2, easeOutQuint, slide
    animation = layersOut, 1, 2, easeOutQuint, slide
    animation = fadeLayersIn, 1, 1, easeOutQuint
    animation = fadeLayersOut, 1, 2, easeOutQuint
    animation = fadePopupsIn, 1, 1.5, almostLinear
    animation = fadePopupsOut, 1, 1.5, almostLinear
    animation = fadeIn, 1, 1, almostLinear
    animation = fadeOut, 1, 1, almostLinear
    animation = zoomFactor, 1, 2, quick
}

layers {
    layerrule = blur, rofi
    layerrule = blur, notifications
    layerrule = animation popin, selection

    layerrule = order 1, waybar
    layerrule = order 2, mako
    layerrule = order 3, rofi
}

windowrules {
    windowrule = nofocus,class:^$, title:^$, xwayland:1, floating:1, fullscreen:0, pinned:0
    windowrule = bordercolor rgba(dfdfdd99), floating:1

    windowrule = float, class:com.interversehq.qView
    windowrule = float, title:File Operation Progress
    windowrule = float, title:Rename.*$
    windowrule = float, initialTitle:Friends List
    windowrule = float, class:xdg-desktop-portal-gtk
    windowrule = float, class:thunar
    windowrule = float, class:com.github.rafostar.Clapper
    windowrule = float, class:steam, title:Steam Settings
    windowrule = float, class:firefox, title:About Mozilla Firefox
    windowrule = float, class:nwg-look
    windowrule = float, class:($TERM), title:^($SYSMON)$
    windowrule = float, title:WaybarUpdates
    windowrule = float, title:wiremix
    windowrule = float, title:nvim-notes

    windowrule = size 1000 600, class:nwg-look
    windowrule = size 800 730, class:thunar
    windowrule = size 60% 80%, title:nvim-notes
    windowrule = size 800 800, title:WaybarUpdates
    windowrule = size 28% 50%, title:wiremix
    windowrule = size 1100 900, class:$TERM, title:$SYSMON
    windowrule = size 1280 720, class:com.interversehq.qView
    windowrule = size 1280 720, class:com.github.rafostar.Clapper
}

binds {
    pass_mouse_when_bound = false
    ignore_group_lock = true

    # Misc Functions
    bind = SUPER SHIFT, S, exec, $TERM -T $SYSMON -e $SYSMON
    bind = SUPER, RETURN, exec, $TERM
    bind = SUPER, Q, killactive
    bind = SUPER, B, exec, $WEB
    bind = SUPER, E, exec, $FMAN
    bind = SUPER, F, togglefloating,
    bind = SUPER, W, pseudo,
    bind = SUPER, X, togglesplit
    bind = SUPER, Z, fullscreen, 1
    bind = SUPER SHIFT, L, exit
    bind = SUPER SHIFT, Q, forcekillactive
    bind = SUPER CTRL, P, exec, hyprpicker -a
    bind = SUPER, N, exec, $TERM -T nvim-notes -e $EDITOR ~/Documents/notes
    bind = SUPER SHIFT, U, exec, footclient -T WaybarUpdates -e sh -c 'cat ~/.config/waybar/logo; yay -Syu; read -p "Press Return to close..."'

    # Rofi
    bind = SUPER, SPACE, exec, $MENU drun -wayland-layer top
    bind = SUPER, ESCAPE, exec, $MENU power-menu -wayland-layer top -modi "power-menu:~/.config/rofi/scripts/rofi-power-menu.sh --choices=lockscreen/logout/suspend/reboot/shutdown" -disable-history -show-icons false -theme ~/.config/rofi/power-menu.rasi
    bind = SUPER, TAB, exec, cliphist list | rofi -i -dmenu -wayland-layer top -theme ~/.config/rofi/cliphist.rasi | cliphist decode | wl-copy
    bind = SUPER, C, exec, $MENU calc -wayland-layer top -modi calc -calc-command "echo '{result}' | cliphist store" -theme ~/.config/rofi/calc.rasi
    bind = SUPER, D, exec, ~/.config/rofi/scripts/dictionary.sh
    bind = SUPER, J, exec, rofimoji -a type copy --selector-args="-theme ~/.config/rofi/rofimoji.rasi -wayland-layer top"
    bind = SUPER, S, exec, rofi -i -wayland-layer top -show recursivebrowser -disable-history -theme ~/.config/rofi/rootsearch.rasi
    bind = SUPER ALT, P, exec, ~/.config/rofi/scripts/wallpicker.sh

    # Hyprshot
    bind = SUPER SHIFT, P, exec, hyprshot -m window -o ~/Pictures/Screenshots/
    bind = SUPER CTRL SHIFT, P, exec, hyprshot -m region -o ~/Pictures/Screenshots/
    bind = SUPER, P, exec, hyprshot -m output -m $MONITOR -o ~/Pictures/Screenshots/

    # Video Recording
    bind = SUPER, R, exec, ~/.config/hypr/scripts/gsr-start.sh
    bind = SUPER SHIFT, R, exec, ~/.config/hypr/scripts/gsr-stop.sh

    # Workspaces
    bind = SUPER, mouse_down, workspace, e+1
    bind = SUPER, mouse_up, workspace, e-1

    bind = SUPER, GRAVE, togglespecialworkspace
    bind = SUPER, 1, workspace, 1
    bind = SUPER, 2, workspace, 2
    bind = SUPER, 3, workspace, 3
    bind = SUPER, 4, workspace, 4
    bind = SUPER, 5, workspace, 5
    bind = SUPER, 6, workspace, 6
    bind = SUPER, 7, workspace, 7
    bind = SUPER, 8, workspace, 8

    bind = SUPER SHIFT, GRAVE, movetoworkspace, special
    bind = SUPER SHIFT, 1, movetoworkspace, 1
    bind = SUPER SHIFT, 2, movetoworkspace, 2
    bind = SUPER SHIFT, 3, movetoworkspace, 3
    bind = SUPER SHIFT, 4, movetoworkspace, 4
    bind = SUPER SHIFT, 5, movetoworkspace, 5
    bind = SUPER SHIFT, 6, movetoworkspace, 7
    bind = SUPER SHIFT, 7, movetoworkspace, 7
    bind = SUPER SHIFT, 8, movetoworkspace, 8

    # Grouping
    bind = SUPER, G, lockactivegroup, toggle
    bind = SUPER SHIFT, G, togglegroup

    bind = SUPER, bracketRight, changegroupactive, f
    bind = SUPER, bracketLeft, changegroupactive, b

    bind = SUPER ALT, left, moveintogroup, l
    bind = SUPER ALT, right, moveintogroup, r
    bind = SUPER ALT, up, moveintogroup, u
    bind = SUPER ALT, down, moveintogroup, d

    bind = SUPER ALT SHIFT, left, moveoutofgroup, l
    bind = SUPER ALT SHIFT, right, moveoutofgroup, r
    bind = SUPER ALT SHIFT, up, moveoutofgroup, u
    bind = SUPER ALT SHIFT, down, moveoutofgroup, d

    # Window Manipulation
    bindm = SUPER, mouse:272, movewindow
    bindm = SUPER, mouse:273, resizewindow

    bind = SUPER, up, movefocus, u
    bind = SUPER, right, movefocus, r
    bind = SUPER, down, movefocus, d
    bind = SUPER, left, movefocus, l

    bind = SUPER SHIFT, up, movewindow, u
    bind = SUPER SHIFT, right, movewindow, r
    bind = SUPER SHIFT, down, movewindow, d
    bind = SUPER SHIFT, left, movewindow, l

    binde = SUPER CTRL, up, resizeactive, 0 -50
    binde = SUPER CTRL, right, resizeactive, 50 0
    binde = SUPER CTRL, down, resizeactive, 0 50
    binde = SUPER CTRL, left, resizeactive, -50 0

    # Audio Control
    binde = SUPER, equal, exec, pamixer -i 1
    binde = SUPER, minus, exec, pamixer -d 1
    bind = SUPER, 0, exec, pamixer -t
    bind = SUPER, 9, exec, $TERM -T wiremix -e wiremix

    bind = SUPER SHIFT, minus, exec, playerctl play-pause
    bind = SUPER SHIFT, 0, exec, playerctl previous
    bind = SUPER SHIFT, equal, exec, playerctl next

    # Screen Zoom
    binde = SUPER CTRL, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    binde = SUPER CTRL, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    binde = SUPER CTRL, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    binde = SUPER CTRL, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    bind = SUPER CTRL, 0, exec, hyprctl -q keyword cursor:zoom_factor 1

    bind = SUPER CTRL, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 0.9')
    bind = SUPER CTRL, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 1.1) | if . < 1 then 1 else . end')
    bind = SUPER CTRL, mouse:274, exec, hyprctl -q keyword cursor:zoom_factor 1
}
