# ┌─┐┌─┐┌┐┌┬ ┬┌─┐┬─┐┬┌─┌─┐
# ┌─┘├┤ │││││││ │├┬┘├┴┐└─┐
# └─┘└─┘┘└┘└┴┘└─┘┴└─┴ ┴└─┘
# https://github.com/kbuckleys/

defaults {
    $WEB = firefox
    $EDITOR = nvim
    $SYSMON = btop
    $TERM = footclient
    $FMAN = $TERM -e yazi
}

monitors {
    monitor = HDMI-A-1, 1920x1080@100, auto, 1, transform, 3
    monitor = DP-1, 2560x1440@180, auto, 1
}

workspaces {
    workspace = 2, monitor:DP-1, default:true
}

rules {
    env = __GLX_VENDOR_LIBRARY_NAME,nvidia
    env = WLR_NO_HARDWARE_CURSORS, 1
    env = LIBVA_DRIVER_NAME,nvidia
    env = GBM_BACKEND,nvidia-drm
    env = NVD_BACKEND,direct
    env = EDITOR, $EDITOR
}

cursor {
    persistent_warps = true
    warp_on_change_workspace = 1
    env = HYPRCURSOR_THEME,MacTahoe-cursors
    env = XCURSOR_THEME,MacTahoe-cursors
    env = HYPRCURSOR_SIZE,24
    env = XCURSOR_SIZE,24
}

misc {
    font_family = 0xProto Nerd Font
    disable_splash_rendering = true
    disable_hyprland_logo = true
    middle_click_paste = false
    background_color = 000000
}

ecosystem {
    no_donation_nag = true
}

startup {
    exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
    exec-once = wl-paste --type image --watch cliphist store
    exec-once = wl-paste --type text --watch cliphist store
    exec-once = dbus-update-activation-environment --all
    exec-once = systemctl --user start hyprpolkitagent
    exec-once = wl-clip-persist --clipboard regular
    exec-once = xrandr --output DP-1 --primary
    exec-once = foot --server
    exec-once = hypridle
    exec-once = waybar
    exec-once = mako
}

input {
    accel_profile = flat
    sensitivity = -0.6
    repeat_delay = 300
}

general {
    gaps_in = -1
    gaps_out = 4
    col.inactive_border = rgba(155,191,191,0.3)
    col.active_border = rgba(155,191,191,1)
    snap {
        enabled = true
    }
}

decoration {
    dim_special = 0.6
    blur {
        enabled = false
    }
    shadow {
        enabled = false
    }
}

group {
    col.border_locked_inactive = rgba(155,191,191,0.3)
    col.border_locked_active = rgba(231,130,132,1)
    col.border_inactive = rgba(155,191,191,0.3)
    col.border_active = rgba(200,164,224,1)
    groupbar {
        col.locked_inactive = rgba(32,36,42,1)
        text_color_inactive = rgba(223,223,221,1)
        col.locked_active = rgba(231,130,132,1)
        col.inactive = rgba(32,36,42,1)
        text_color = rgba(0,0,0,1)
        col.active = rgba(200,164,224,1)

        font_family = 0xProto Nerd Font
        font_weight_active = bold
        indicator_height = 0
        gradients = true
        font_size = 14
        gaps_out = 0
        rounding = 0
        gaps_in = 0
        height = 28
    }
}

dwindle {
    special_scale_factor = 0.98
    preserve_split = true
    pseudotile = true
}

animations {
    bezier = almostLinear, 0.5, 0.5, 0.75, 1.0
    bezier = easeOutQuint, 0.23, 1, 0.32, 1
    bezier = slidevert, 0.65, 0.05, 0.36, 1
    bezier = smooth, 0.22, 0.61, 0.36, 1.0
    bezier = quick, 0.15, 0, 0.1, 1
    bezier = linear, 0, 0, 1, 1

    animation = specialWorkspace, 1, 1, default, slidevertfade 15%
    animation = windowsOut, 1, 4, easeOutQuint, popinfade 87%
    animation = windowsIn, 1, 2, easeOutQuint, popinfade 87%
    animation = workspaces, 1, 2, default, slidefade 15%
    animation = layersIn, 1, 1.5, quick, slidevertfade
    animation = layersOut, 1, 4, quick, slidevertfade
    animation = fadeOut, 1, 1.5, almostLinear
    animation = fadeIn, 1, 1.5, almostLinear
    animation = windowsMove, 1, 2, smooth
    animation = zoomFactor, 1, 2, quick
    animation = fade, 1, 2, quick
    animation = border, 0
}

layerrules {
    layerrule = match:namespace notifications, animation fade
    layerrule = match:namespace hyprpicker, animation false
    layerrule = match:namespace selection, animation fade
}

windowrules {
    windowrule = match:class firefox, match:title About Mozilla Firefox, float on
    windowrule = match:title System Update, float on, center on, size 1000 1100
    windowrule = match:class firefox, match:title Picture-in-Picture, float on
    windowrule = match:title $SYSMON, float on, center on, size 1000 1100
    windowrule = match:class steam, match:title Steam Settings, float on
    windowrule = match:title Wiremix, float on, center on, size 650 650
    windowrule = match:title PARUZ, float on, center on, size 900 1000
    windowrule = match:initial_title Friends List, float on
    windowrule = match:class mpv, float on, center on
    windowrule = match:class feh, float on, center on

    windowrule = match:fullscreen 1, border_color rgba(fab387FF)
    windowrule = match:float 1, border_color rgba(B6E0A4FF)
}

binds {
    scroll_event_delay = 0

    bind = SUPER, U, exec, $TERM -T "System Update" -e ~/scripts/update.sh
    bind = SUPER, M, exec, $TERM -T PARUZ -e ~/scripts/paruz.sh
    bind = SUPER SHIFT, S, exec, $TERM -T $SYSMON -e $SYSMON
    bind = SUPER, Y, exec, killall -SIGUSR1 waybar
    bind = SUPER CTRL, P, exec, hyprpicker -a
    bind = SUPER, RETURN, exec, $TERM
    bind = SUPER SHIFT, ESCAPE, exit
    bind = SUPER, L, exec, hyprlock
    bind = SUPER, E, exec, $FMAN
    bind = SUPER, B, exec, $WEB

    # rofi
    bind = SUPER, ESCAPE, exec, rofi -show power-menu -modi "power-menu:~/scripts/rofi/rofi-power-menu.sh --choices=lockscreen/logout/suspend/reboot/shutdown" -theme ~/.config/rofi/power-menu.rasi
    bind = SUPER SHIFT, C, exec, rofi -show calc -modi calc -calc-command "echo '{result}' | cliphist store" -theme ~/.config/rofi/calc.rasi
    bind = SUPER, C, exec, cliphist list | rofi -i -dmenu -theme ~/.config/rofi/cliphist.rasi | cliphist decode | wl-copy
    bind = SUPER, S, exec, rofi -i -show recursivebrowser -disable-history -theme ~/.config/rofi/rootsearch.rasi
    bind = SUPER, J, exec, rofimoji -a type copy --selector-args="-theme ~/.config/rofi/rofimoji.rasi"
    bind = SUPER, D, exec, ~/scripts/rofi/rofi-dict.sh
    bind = SUPER, SPACE, exec, rofi -show drun

    # Workspaces
    bind = SUPER, mouse_down, workspace, e+1
    bind = SUPER, mouse_up, workspace, e-1

    bind = SUPER, GRAVE, togglespecialworkspace
    bind = SUPER, 1, workspace, 1
    bind = SUPER, 2, workspace, 2
    bind = SUPER, 3, workspace, 3
    bind = SUPER, 4, workspace, 4
    bind = SUPER, 5, workspace, 5
    bind = SUPER, 6, workspace, 6
    bind = SUPER, 7, workspace, 7
    bind = SUPER, 8, workspace, 8

    bind = SUPER SHIFT, GRAVE, movetoworkspace, special
    bind = SUPER SHIFT, 1, movetoworkspace, 1
    bind = SUPER SHIFT, 2, movetoworkspace, 2
    bind = SUPER SHIFT, 3, movetoworkspace, 3
    bind = SUPER SHIFT, 4, movetoworkspace, 4
    bind = SUPER SHIFT, 5, movetoworkspace, 5
    bind = SUPER SHIFT, 6, movetoworkspace, 7
    bind = SUPER SHIFT, 7, movetoworkspace, 7
    bind = SUPER SHIFT, 8, movetoworkspace, 8

    # Window Manipulation
    bindm = SUPER, mouse:273, resizewindow
    bindm = SUPER, mouse:272, movewindow

    bind = SUPER, RIGHT, movefocus, r
    bind = SUPER, LEFT, movefocus, l
    bind = SUPER, DOWN, movefocus, d
    bind = SUPER, UP, movefocus, u

    binde = SUPER CTRL, LEFT, resizeactive, -50 0
    binde = SUPER CTRL, RIGHT, resizeactive, 50 0
    binde = SUPER CTRL, DOWN, resizeactive, 0 50
    binde = SUPER CTRL, UP, resizeactive, 0 -50

    bindd = SUPER SHIFT, RIGHT, Move window to the right, movewindow, r
    bindd = SUPER SHIFT, LEFT, Move window to the left, movewindow, l
    bindd = SUPER SHIFT, DOWN, Move window down, movewindow, d
    bindd = SUPER SHIFT, UP, Move window up, movewindow, u

    bindd = SUPER ALT, RIGHT, Swap window to the right, swapwindow, r
    bindd = SUPER ALT, LEFT, Swap window to the left, swapwindow, l
    bindd = SUPER ALT, DOWN, Swap window down, swapwindow, d
    bindd = SUPER ALT, UP, Swap window up, swapwindow, u

    bindd = SUPER SHIFT, TAB, Cycle to prev window, cyclenext, prev
    bindd = SUPER, TAB, Cycle to next window, cyclenext

    bind = SUPER SHIFT, W, exec, hyprctl dispatch centerwindow
    bind = SUPER SHIFT, Q, forcekillactive
    bind = SUPER SHIFT, F, fullscreen
    bind = SUPER, F, togglefloating
    bind = SUPER, Z, fullscreen, 1
    bind = SUPER, F, centerwindow
    bind = SUPER, X, togglesplit
    bind = SUPER, Q, killactive
    bind = SUPER, W, pseudo,

    # Grouping
    bind = SUPER, G, lockactivegroup, toggle
    bind = SUPER SHIFT, G, togglegroup

    bind = SUPER, bracketRight, changegroupactive, f
    bind = SUPER, bracketLeft, changegroupactive, b

    bind = SUPER SHIFT ALT, RIGHT, moveintogroup, r
    bind = SUPER SHIFT ALT, LEFT, moveintogroup, l
    bind = SUPER SHIFT ALT, DOWN, moveintogroup, d
    bind = SUPER SHIFT ALT, UP, moveintogroup, u

    bind = SUPER SHIFT CTRL, RIGHT, moveoutofgroup, r
    bind = SUPER SHIFT CTRL, LEFT, moveoutofgroup, l
    bind = SUPER SHIFT CTRL, DOWN, moveoutofgroup, d
    bind = SUPER SHIFT CTRL, UP, moveoutofgroup, u

    # Audio Control
    bind = SUPER, 9, exec, $TERM -T Wiremix -e wiremix
    binde = SUPER, equal, exec, pamixer -i 1
    binde = SUPER, minus, exec, pamixer -d 1
    bind = SUPER, 0, exec, pamixer -t

    bind = SUPER SHIFT, minus, exec, playerctl play-pause
    bind = SUPER SHIFT, 0, exec, playerctl previous
    bind = SUPER SHIFT, equal, exec, playerctl next

    # hyprshot
    bind = SUPER CTRL SHIFT, P, exec, hyprshot -m region -o ~/Pictures/Screenshots/
    bind = SUPER SHIFT, P, exec, hyprshot -m window -o ~/Pictures/Screenshots/
    bind = SUPER, P, exec, ~/scripts/hyprshot.sh

    # wf-recorder
    bind = SUPER CTRL SHIFT, R, exec, ~/scripts/wf-recorder/wf-recorder-region.sh
    bind = SUPER SHIFT, R, exec, ~/scripts/wf-recorder/wf-recorder-window.sh
    bind = SUPER, R, exec, ~/scripts/wf-recorder/wf-recorder-monitor.sh

    # Screen Zoom
    binde = SUPER CTRL, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    binde = SUPER CTRL, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    bind = SUPER CTRL, 0, exec, hyprctl -q keyword cursor:zoom_factor 1

    bind = SUPER CTRL, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 1.1) | if . < 1 then 1 else . end')
    bind = SUPER CTRL, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 0.9')
    bind = SUPER CTRL, mouse:274, exec, hyprctl -q keyword cursor:zoom_factor 1
}
